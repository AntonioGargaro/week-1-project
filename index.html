<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Project</title>
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <FORM NAME="myform" ACTION="" METHOD="GET">
      <p>
        <INPUT
          id="name"
          TYPE="text"
          placeholder="your name"
          NAME="inputbox"
          VALUE=""
        />
        <label for="name">Enter your name...</label>
      </p>
      <fieldset>
        <legend>Starsign Horoscope</legend>
        <p>
          <label for="myList">Do you know your starsign?</label>
          <select id="myList">
            <option value="Yes">Yes</option>
            <option value="No">No</option>
          </select>
        </p>

        <!--<INPUT TYPE="button" NAME="button" Value="Click" onClick="testResults(this.form)"> -->

        <div id="dateInput" style="display:none;">
          <input id="bday" type="date" name="bday" min="1900-01-01" />
          <label for="bday">When is your birthday?</label>
        </div>

        <div id="starsignInput">
          <label for="starsignList">What is your starsign?</label>
          <select id="starsignList">
            <option value="Aries">Aries</option>
            <option value="Taurus">Taurus</option>
            <option value="Gemini">Gemini</option>
            <option value="Cancer">Cancer</option>
            <option value="Leo">Leo</option>
            <option value="Virgo">Virgo</option>
            <option value="Libra">Libra</option>
            <option value="Scorpio">Scorpio</option>
            <option value="Sagittarius">Sagittarius</option>
            <option value="Capricorn">Capricorn</option>
            <option value="Aquarius">Aquarius</option>
            <option value="Pisces">Pisces</option>
          </select>
        </div>
      </fieldset>
    </FORM>
  </body>

  <script>
    document
      .getElementById("myList")
      .addEventListener("change", function(event) {
        if (event.target.value === "Yes") {
          document.getElementById("starsignInput").style.display = "block";
          document.getElementById("dateInput").style.display = "none";
        } else {
          document.getElementById("starsignInput").style.display = "none";
          document.getElementById("dateInput").style.display = "block";
        }
      });

    document.getElementById("bday").addEventListener("change", function(event) {
      let birthday = new Date(event.target.value);
      let date = birthday.getDate();
      let month = birthday.getMonth() + 1;
      let year = birthday.getFullYear();
      if (year / 1000 < 1) {
        return;
      }

      start = 1901;
      x = (start - year) % 12;
      if (x == 1 || x == -11) {
        animal = "Rat";
      }
      else if(x == 0) {
        value = "Ox";
      }
      else if(x == 11 || x == -1) {
        animal = "Tiger";
      }
      else if (x == 10 || x == -2) {
        animal = "Rabbit";
      }
      else if (x == 9 || x == -3) {
        animal = "Dragon";
      }
      else if (x == 8 || x == -4) {
        animal = "Snake";
      }
      else if (x == 7 || x == -5) {
        animal = "Horse";
      }
      else if (x == 6 || x == -6) {
        animal = "Sheep";
      }
      else if (x == 5 || x == -7) {
        animal = "Monkey";
      }
      else if (x == 4 || x == -8) {
        animal = "Rooster";
      }
      else if (x == 3 || x == -9) {
        animal = "Dog";
      }
      else if (x == 2 || x == -10) {
        animal = "Boar";
      }
      /*console.log(animal); */

      let value;

      if ((month == 1 && date >= 21) || (month == 2 && date <= 19)) {
        value = "Aquarius";
      }
      else if ((month == 2 && date >= 20) || (month == 3 && date <= 20)) {
        value = "Pisces";
      }
      else if ((month == 3 && date >= 21) || (month == 4 && date <= 19)) {
        value = "Aries";
      }
      else if ((month == 4 && date >= 21) || (month == 5 && date <= 21)) {
        value = "Taurus";
      }
      else if ((month == 5 && date >= 22) || (month == 6 && date <= 21)) {
        value = "Gemini";
      }
      else if ((month == 6 && date >= 22) || (month == 7 && date <= 23)) {
        value = "Cancer";
      }
      else if ((month == 7 && date >= 24) || (month == 8 && date <= 23)) {
        value = "Leo";
      }
      else if ((month == 8 && date >= 24) || (month == 9 && date <= 23)) {
        value = "Virgo";
      }
      else if ((month == 9 && date >= 24) || (month == 10 && date <= 23)) {
        value = "Libra";
      }
      else if ((month == 10 && date >= 24) || (month == 11 && date <= 22)) {
        value = "Scorpio";
      }
      else if ((month == 11 && date >= 23) || (month == 12 && date <= 21)) {
        value = "Sagittarius";
      }
      
      else if ((month == 12 && date >= 22) || (month == 1 && date <= 20)) {
        value = "Capricorn";
      }

      addStarsignToPage(value);
      addAnimalToPage(animal);
    });

    document
      .getElementById("starsignList")
      .addEventListener("change", function(event) {
        addStarsignToPage(event.target.value);
      });

    function addStarsignToPage(starsign) {
      let p_element = document.getElementById("starsignpara");
      if (p_element) {
        p_element.textContent = starsign;
      } else {
        let para = document.createElement("p");
        para.setAttribute("id", "starsignpara");
        let node = document.createTextNode(starsign);
        para.appendChild(node);
        document.body.appendChild(para);
      }
    }
    function addAnimalToPage(animal) {
      let pa_element = document.getElementById("animalImage");
      if (pa_element) {
        pa_element.setAttribute(
          "src",
          "Images/" + animal.toLowerCase() + ".png"
        );
      } else {
        let zodiacPic = document.createElement("img");
        zodiacPic.setAttribute(
          "src",
          "Images/" + animal.toLowerCase() + ".png"
        );
        zodiacPic.setAttribute("id", "animalImage");
        document.body.appendChild(zodiacPic);
      }
    }
  </script>
</html>
